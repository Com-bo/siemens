<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Waiting...</title>
</head>
<style type="text/css">
  .welcome div {
    color: #009999;
    font-size: 48px;
    height: 200px;
    text-align: center;
    position: absolute;
    width: 100%;
    top: 50%;
    margin-top: -300px;
  }

  .welcome div img {
    height: 200px;
  }
</style>

<body class="welcome">

  <div>
    <img src="./loadding.gif" />
    <br />
    <p> Welcome to DX Ordering</p>
  </div>
  <script src="oidc-client.js"></script>
  <script>

    var mgr = new Oidc.UserManager({ userStore: new Oidc.WebStorageStateStore({ store: window.sessionStorage }), loadUserInfo: true, filterProtocolClaims: true });
    let redirect = "" //237
    // let redirect = "/web"
    if (sessionStorage.getItem('re')) {
      redirect = redirect + "/" + window.atob(sessionStorage.getItem('re'))
    }

    mgr.signinRedirectCallback().then(function (user) {
      window.location.href = redirect || "/";
    }).catch(function (err) {
      window.location.href = redirect || "/";
    });

  </script>
</body>

</html>